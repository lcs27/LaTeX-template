\mode<presentation>

\setbeamertemplate{sections/subsections in toc}[square]
\setbeamertemplate{itemize item}[square]
\setbeamertemplate{itemize subitem}[circle]

% Allow multi-slide frames
\setbeamertemplate{frametitle continuation}{}

% Horizontal separator
\setbeamertemplate{separator}{%
    \usebeamercolor{separator}%
    \textcolor{fg}{\rule{.7\textwidth}{1pt}}%
}

% % Separate authors with newlines
\renewcommand{\beamer@andtitle}{\\}

% Title page. If you want to add a background image on the title slide,
% use the \background command to set the path to that image. Otherwise,
% no image will be included
\RequirePackage{tikz}

\usetikzlibrary{fadings}

\newcommand{\background}[1]{\newcommand{\lcs@background}{#1}}


\setbeamertemplate{title page}{
    \begin{tikzpicture}[overlay,remember picture]

    \node[anchor=north west,inner sep=0pt] at (current page.north west)
        {\includegraphics[width=\paperwidth]{\lcs@background}};
    \end{tikzpicture}

    \vfill

    \begin{center}
            
            \usebeamerfont{title}
            \vspace{3em}

            \inserttitle
            
            \usebeamertemplate{separator}

            \usebeamerfont{author}
            \vspace{1em}
            \insertauthor

            \vspace{1em}
            \usebeamerfont{details}
            \insertinstitute\\
            \vspace{1em}
            \insertdate
    \end{center}

    \setbeamertemplate{footline}{}

}

\setbeamertemplate{endpage}{%
    \setbeamertemplate{footline}{} 
    \begin{frame}
        \begin{tikzpicture}[overlay,remember picture]

            \node[anchor=north west,inner sep=0pt] at (current page.north west)
                {\includegraphics[width=\paperwidth]{\lcs@background}};
        \end{tikzpicture}

        \vfill

        \begin{center}
            
            \usebeamerfont{title}
            \vspace{1em}
            \thankyouwd
            
            \usebeamertemplate{separator}

            \usebeamerfont{details}
            \vspace{1ex}
            \inserttitle\\
            \vspace{1ex}
            \insertinstitute\quad \insertauthor\\
            \vspace{1ex}
            \insertdate
        \end{center}
    \end{frame}
}

\AtEndDocument{\usebeamertemplate{endpage}}

\mode<all>
